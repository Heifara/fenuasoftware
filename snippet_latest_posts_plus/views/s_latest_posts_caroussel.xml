<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<!-- Snippet's Body -->
	<template id="s_latest_post_caroussel" name="Latest Posts Caroussel">
		<section class="s_latest_posts_big_picture container">
			<h2 class="text-center sans-serif">Latest Posts</h2>
			<div class="js_get_posts" data-loading="true" data-template="snippet_latest_posts_plus.s_latest_post_caroussel_template" />
		</section>
	</template>

	<template id="s_latest_post_caroussel_post_template">
		<figure>
			<div class="o_blog_cover_container thumb">
				<div class="o_blog_cover_component o_blog_cover_image" t-attf-style="background-image: #{properties.get('background-image')};">
					<a t-att-href="'/blog/%s/post/%s' % (p.blog_id.id, p.id)">
						<h2 style="color: white" t-esc="p.name" />
					</a>
					<p style="color: white" t-esc="p.subtitle" />
				</div>
			</div>
		</figure>
	</template>

	<template id="s_latest_post_caroussel_template">
		<t t-if="not posts">
			<t t-call="snippet_latest_posts_plus.no_blog_posts" />
		</t>
		<div id="myCarousel" class="carousel slide" data-ride="carousel">
			<!-- Indicators -->
			<ol class="carousel-indicators">
				<t t-foreach="posts" t-as="post">
					<t t-if="post_index == 0">
						<li data-target="#myCarousel" t-attf-data-slide-to="{{post_index}}" class="active"></li>
					</t>
					<t t-else="">
						<li data-target="#myCarousel" t-attf-data-slide-to="{{post_index}}"></li>
					</t>
				</t>
			</ol>

			<!-- Wrapper for slides -->
			<div class="carousel-inner" role="listbox">
				<t t-foreach="posts" t-as="p">
					<t t-set="properties" t-value="json.loads(p.cover_properties)" />

					<t t-if="p_index == 0">
						<div class="item active">
							<t t-call="snippet_latest_posts_plus.s_latest_post_caroussel_post_template" />
						</div>
					</t>
					<t t-else="">
						<div class="item">
							<t t-call="snippet_latest_posts_plus.s_latest_post_caroussel_post_template" />
						</div>
					</t>
				</t>
			</div>

			<!-- Left and right controls -->
			<a class="carousel-control left" href="#myCarousel" role="button" data-slide="prev">
				<span class="fa fa-chevron-left" aria-hidden="true"></span>
				<span class="sr-only">Previous</span>
			</a>
			<a class="carousel-control right" href="#myCarousel" role="button" data-slide="next">
				<span class="fa fa-chevron-right" aria-hidden="true"></span>
				<span class="sr-only">Next</span>
			</a>
		</div>
	</template>
</odoo>
