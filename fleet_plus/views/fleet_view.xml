<odoo>
	<data>

		<!-- Forms -->
		<record id='fleet_ship_view_form' model='ir.ui.view'>
			<field name="name">fleet.ship.form</field>
			<field name="model">fleet.ship</field>
			<field name="arch" type="xml">
				<form string="Vehicle">
					<header>
						<field name="state_id"  widget="statusbar" clickable="True" />
					</header>
					<sheet>
						<div class="oe_button_box" name="button_box">
							<button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
								<field name="active" widget="boolean_button" options='{"terminology": "archive"}'/>
							</button>
							<button name="return_action_to_open"
								type="object"
								class="oe_stat_button"
								icon="fa-book"
								context="{'xml_id':'fleet_vehicle_log_contract_action'}"
								help="show the contract for this vehicle">
								<field name="contract_count" widget="statinfo" string="Contracts"/>
							</button>
							<button name="act_show_log_cost"
								type="object"
								class="oe_stat_button"
								icon="fa-usd"
								help="show all the costs for this vehicle"
								groups="fleet.fleet_group_manager">
								<field name="cost_count" widget="statinfo" string="Costs"/>
							</button>
							<button name="return_action_to_open"
								type="object"
								class="oe_stat_button"
								icon="fa-wrench"
								context="{'xml_id':'fleet_vehicle_log_services_action'}"
								help="show the services logs for this vehicle" >
								<field name="service_count" widget="statinfo" string="Services"/>
							</button>
							<button name="return_action_to_open"
								type="object"
								class="oe_stat_button"
								icon="fa-flask"
								context="{'xml_id':'fleet_vehicle_log_fuel_action'}"
								help="show the fuel logs for this vehicle" >
								<field name="fuel_logs_count" widget="statinfo" string="Fuel"/>
							</button>
							<button name="return_action_to_open"
								type="object"
								class="oe_stat_button"
								icon="fa-tachometer"
								context="{'xml_id':'fleet_vehicle_odometer_action'}"
								help="show the odometer logs for this vehicle" >
								<field name="odometer_count" widget="statinfo" string="Odometer"/>
							</button>
						</div>
						<field name="image_medium" widget='image' class="oe_avatar"/>
						<div class="oe_title">
							<p><field name="name"/></p>
							<label for="shipname" class="oe_edit_only"/>
							<h1>
								<field name="shipname" placeholder="Ship name"/>
							</h1>
							<label for="license_plate" class="oe_edit_only"/>
							<h2>
								<field name="license_plate" class="oe_inline" placeholder="e.g. PAE 326"/>
							</h2>
							<label for="model_id" class="oe_edit_only"/>
							<h3>
								<field name="model_id" placeholder="e.g. Model S"/>
							</h3>
							<label for="tag_ids" class="oe_edit_only"/>
							<field name="tag_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
						</div>
						<group col="2" string="General Properties">
							<group >
								<field name="shipowner" />
								<field name="location" />
								<field name="vin_sn" />
								<field name="company_id" groups="base.group_multi_company"/>
							</group>
							<group >
								<label for="odometer"/>
								<div class="o_row">
									<field name="odometer"/>
									<field name="odometer_unit"/>
								</div>
								<field name="acquisition_date" />
								<field name="car_value" />
							</group>
						</group>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread" options='{"thread_level": 1}'/>
					</div>
				</form>
			</field>
		</record>

		<!-- Kanban -->
		<record id='fleet_ship_view_kanban' model='ir.ui.view'>
			<field name="name">fleet.ship.kanban</field>
			<field name="model">fleet.ship</field>
			<field name="arch" type="xml">
				<kanban>
					<field name="license_plate" />
					<field name="model_id" />
					<field name="driver_id" />
					<field name="location" />
					<field name="state_id" />

					<field name="image" />
					<field name="tag_ids" />
					<field name="contract_renewal_due_soon" />
					<field name="contract_renewal_overdue" />
					<field name="contract_renewal_name" />
					<field name="contract_renewal_total" />

					<templates>
						<t t-name="kanban-box">
							<div class="oe_kanban_global_click">
								<div class="o_kanban_tags_section">
									<field name="tag_ids"/>
								</div>
								<div class="o_kanban_image">
									<img t-att-src="kanban_image('fleet.ship', 'image_small', record.id.value)"/>
								</div>
								<div class="oe_kanban_details">
									<strong>
										<field name="name"/> : <field name="license_plate"/> : <field name="model_id"/>
									</strong>
									<ul>
										<li>
											<t t-if="record.driver_id.raw_value"><field name="driver_id"/></t>
										</li>
										<li>
											<t t-if="record.location.raw_value"><field name="location"/></t>
										</li>
									</ul>
									<div class="o_kanban_button">
										<a t-if="record.contract_renewal_due_soon.raw_value and !record.contract_renewal_overdue.raw_value" data-type="object" data-name="return_action_to_open" href="#" class="oe_kanban_action btn btn-sm btn-warning" data-context='{"xml_id":"fleet_vehicle_log_contract_action"}'>
											<field name="contract_renewal_name"/> <t t-if="record.contract_renewal_total.raw_value > 0"> and <field name="contract_renewal_total" /> other(s)</t>
										</a>
										<a t-if="record.contract_renewal_overdue.raw_value" data-type="object" data-name="return_action_to_open" href="#" class="oe_kanban_action btn btn-sm btn-danger" data-context='{"xml_id":"fleet_vehicle_log_contract_action"}'>
											<field name="contract_renewal_name"/> <t t-if="record.contract_renewal_total.raw_value > 0"> and <field name="contract_renewal_total" /> other(s)</t>
										</a>
									</div>
								</div>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>

		<!-- Actions -->
		<record id='fleet_ship_action' model='ir.actions.act_window'>
			<field name="name">Ship</field>
			<field name="res_model">fleet.ship</field>
			<field name="view_type">form</field>
			<field name="view_mode">kanban,tree,form</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Click to create a new vehicle.
				</p><p>
				You will be able to manage your fleet by keeping track of the
				contracts, services, fixed and recurring costs, odometers and
				fuel logs associated to each vehicle.
			</p><p>
			Odoo will warn you when services or contract have to be
			renewed.
		</p>
	</field>
</record>


<!-- Menuitem -->
<menuitem name="Ship" parent="fleet.menu_root" id="fleet_ships" sequence="2" groups="fleet.fleet_group_user"/>
<menuitem action="fleet_ship_action" parent="fleet_ships" id="fleet_ship_menu" groups="fleet.fleet_group_user"/>
</data>
</odoo>