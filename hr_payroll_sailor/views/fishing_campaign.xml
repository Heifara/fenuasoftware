<odoo>
  <data>
    <!-- Tree -->
    <record model='ir.ui.view' id='fishing_campaign_tree'>
      <field name='name'>fishing_campaign_tree</field>
      <field name='model'>fishing.campaign</field>
      <field name='arch' type='xml'>
        <tree string='description'>
          <field name='name'/>
          <field name="shipowner"/>
          <field name="state"/>
        </tree>
      </field>
    </record>
    <record model='ir.ui.view' id='fishing_campaign_run_tree'>
      <field name='name'>fishing_campaign_run_tree</field>
      <field name='model'>fishing.campaign.run</field>
      <field name='arch' type='xml'>
        <tree string='description'>
          <field name='name'/>
          <field name="state"/>
        </tree>
      </field>
    </record>

    <!-- Form -->
    <record model="ir.ui.view" id="fishing_campaign_form_view">
      <field name="name">fishing_campaign_form_view</field>
      <field name="model">fishing.campaign</field>
      <field name="arch" type="xml">
        <form string="description">
          <header>
            <button name="compute_sheet" type="object" string="CALCUL" class="oe_highlight" states="draft"/>
            <button name="action_valid" type="object" string="VALIDATE" class="oe_highlight" states="draft"/>
            <button name="action_draft" type="object" string="BROUILLON" class="oe_highlight" groups="base.group_no_one"/>
            <button name="action_cancel" type="object" string="CANCEL" states="draft"/>
            <field name="state" widget="statusbar"/>
          </header>
          <sheet>
            <div class="oe_button_box" name="button_box">
              <button type="object" name="action_view_payslip" class="oe_stat_button" icon="fa-truck" states="valid">
                <field name="payslip_count" widget="statinfo" string="Payslip" help="Generated Payslip"/>
              </button>
            </div>
            <h1 style='text-align: center;'>
              Campagne de pêche n° <field name="name"/>
            </h1>
            <h2 style='text-align: center;'>
              FEUILLE DE MAREE PARTAGE
            </h2>
            <h3 style='text-align: center;'>
              <field name="fishing_campaign_run" domain="[('state','=','draft')]"/>
            </h3>
            <h4 style='text-align: center; color: red'>
                Les fiches de payes seront générées depuis le lot
            </h4>
            <group>
              <group>
                <field name="ship"/>
                <field name="shipowner"/>
                <field name="tahiti_num"/>
                <field name="date"/>
              </group>
              <group>
                <field name="sea_duration"/>
                <field name="departure_preparation_duration"/>
                <field name="works_on_boat_returned_duration"/>
                <field name="total_duration"/>
              </group>
              <group>
                <field name="crew_percentage"/>
                <field name="shipowner_percentage"/>
              </group>
            </group>
            <h3>
              RECETTES BRUTES
            </h3>
            <field name="customer_invoice_line_ids">
            </field>
            <group class="oe_subtotal_footer oe_right" colspan="2">
              <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                <label for="total_revenue_amount"/>
                <button name="compute_sheet" string="(update)" type="object" class="oe_edit_only oe_link"/>
              </div>
              <field name="total_revenue_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
            </group>
            <h3>
              CHARGES COMMUNES
            </h3>
            <field name="supplier_invoice_line_ids">
            </field>
            <group class="oe_subtotal_footer oe_right" colspan="2">
              <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                <label for="total_expense_amount"/>
                <button name="compute_sheet" string="(update)" type="object" class="oe_edit_only oe_link"/>
              </div>
              <field name="total_expense_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
            </group>
            <h3>
              NET A PARTAGER
            </h3>
            <group colspan="2">
              <field name="total_net_amount"/>
              <field name="total_share_weight"/>
            </group>
            <group>
              <field name="crew_amount"/>
              <field name="shipowner_amount"/>
            </group>
            <button name="compute_sheet" string="(update)" type="object" class="oe_edit_only oe_link"/>
            <field name="fishing_campaign_share_distributions">
              <tree string="Marins" editable="bottom">
                <field name="fishing_campaign_date"/>
                <field name="sailor"/>
                <field name="job"/>
                <field name="share_weight"/>
                <field name="wage" sum="Total"/>
                <field name="deposit" sum="Total"/>
                <field name="residual" sum="Total"/>
                <field name="fishing_campaign" invisible='True'/>
                <field name="fishing_campaign_run" invisible='False' readonly='True'/>
              </tree>
            </field>
          </sheet>
        </form>
      </field>
    </record>
    <record model="ir.ui.view" id="fishing_campaign_run_form_view">
      <field name="name">fishing_campaign_run_form_view</field>
      <field name="model">fishing.campaign.run</field>
      <field name="arch" type="xml">
        <form string="description">
          <header>
            <button name="compute_payslips" type="object" string="CALCUL" class="oe_highlight" states="draft"/>
            <button name="action_valid" type="object" string="VALIDATE" class="oe_highlight" states="draft"/>
            <button name="action_draft" type="object" string="BROUILLON" class="oe_highlight" groups="base.group_no_one"/>
            <button name="action_cancel" type="object" string="CANCEL" states="draft"/>
            <field name="state" widget="statusbar"/>
          </header>
          <sheet>
            <div class="oe_button_box" name="button_box">
              <button type="object" name="action_view_payslip" class="oe_stat_button" icon="fa-truck" states="valid">
                <field name="payslip_count" widget="statinfo" string="Payslip" help="Generated Payslip"/>
              </button>
            </div>
            <h1>
              Fishing Campaign for <field name="name"/>
            </h1>
            <group col="2">
              <label for="date_from" string="Period"/>
              <div>
                <field name="date_from" class="oe_inline"/> - <field name="date_to" class="oe_inline"/>
              </div>
            </group>
            <h3>
              Fishing Campaigns Share Distribution
            </h3>
            <field name="fishing_campaign_share_distributions">
              <tree string="Marins">
                <field name="fishing_campaign_date"/>
                <field name="fishing_campaign_run" invisible='False'/>
                <field name="fishing_campaign"/>
                <field name="sailor"/>
                <field name="job"/>
                <field name="share_weight"/>
                <field name="wage" sum="Total"/>
                <field name="deposit" sum="Total"/>
                <field name="residual" sum="Total"/>
              </tree>
            </field>
            <h3>
              Payslip
            </h3>
            <field name="payslips">
              <tree>
                <field name="employee_id"/>
                <field name="fishing_campaign_wage"/>
                <field name="date_from"/>
                <field name="date_to"/>
                <field name="state"/>
              </tree>
            </field>
          </sheet>
        </form>
      </field>
    </record>

    <!-- Kanban -->
    <record id='fishing_campaign_run_view_kanban' model='ir.ui.view'>
      <field name="name">fishing_campaign_run_view_kanban</field>
      <field name="model">fishing.campaign.run</field>
      <field name="arch" type="xml">
        <kanban>
          <field name="name" />
          <field name="state" />

          <templates>
            <t t-name="kanban-box">
              <div class="oe_kanban_global_click">
                <div class="oe_kanban_details">
                  <strong>
                    <field name="name"/> : <field name="state"/>
                  </strong>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <!-- Pivot -->
    <record model="ir.ui.view" id="fishing_campaign_pivot">
      <field name="name">fishing_campaign_pivot</field>
      <field name="model">fishing.campaign</field>
      <field name="arch" type="xml">
        <pivot string="Fishing Campaign" display_quantity="true">
        </pivot>
      </field>
    </record>

    <!-- Graph -->
    <record model="ir.ui.view" id="fish_campaign_graph">
      <field name="name">fish_campaign_graph</field>
      <field name="model">fishing.campaign</field>
      <field name="arch" type="xml">
        <graph string="Fishing Campaign">
          <field name="date"/>
          <field name="shipowner_amount" type="measure"/>
        </graph>
      </field>
    </record>

    <!-- Actions -->
    <record id="fishing_campaign_dashboard_action" model="ir.actions.act_window">
      <field name="name">Fishing Campaign</field>
      <field name="res_model">fishing.campaign</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form,pivot,graph</field>
    </record>
    <record id="fishing_campaign_batches_action" model="ir.actions.act_window">
      <field name="name">Fishing Campaign Batches</field>
      <field name="res_model">fishing.campaign.run</field>
      <field name="view_type">form</field>
      <field name="view_mode">kanban,tree,form</field>
    </record>

    <!-- Menus -->
    <menuitem id="fishing_campaign_root_menu" name="Fishing Campaign" parent="" action="fishing_campaign_dashboard_action" web_icon="hr_payroll_sailor,static/description/icon.png"/>
    <menuitem id="fishing_campaign_dashboard_menu" name="Dashboard" parent="fishing_campaign_root_menu" action="fishing_campaign_dashboard_action"/>
    <menuitem id="fishing_campaign_run_menu" name="Fishing Campaign Batches" parent="fishing_campaign_root_menu" action="fishing_campaign_batches_action"/>
    <menuitem id="fishing_campaign_settings_menu" name="Settings" parent="fishing_campaign_root_menu" action=""/>

  </data>
</odoo>